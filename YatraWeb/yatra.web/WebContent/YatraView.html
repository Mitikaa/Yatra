<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<meta charset="utf-8">
<title>Yatra: Plan a trip</title>
<style>
#right-panel {
	font-family: 'Roboto', 'sans-serif';
	line-height: 30px;
	padding-left: 10px;
	
	
}

#right-panel select, #right-panel input {
	font-size: 15px;
}

#right-panel select {
	width: 100%;
	
}

#right-panel i {
	font-size: 12px;
	
}

html, body {
	height: 100%;
	margin: 0;
	padding: 0;
	
}

#map {
	height: 100%;
	float: left;
	width: 70%;
	height: 100%;
}

#right-panel {
	margin: 20px;
	border-width: 2px;
	width: 20%;
	height: 400px;
	float: left;
	text-align: left;
	padding-top: 0;
	
	
}

#directions-panel {
	margin-top: 10px;
	background-color: #A9A9A9;
	padding: 10px;
}
</style>
</head>
<body>




<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.8&appId=1315153828529272";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

	<div id="map"></div>
	<div id="right-panel">
	<div class="fb-login-button" data-max-rows="1" data-size="medium" data-show-faces="false" data-auto-logout-link="false"></div><br/>
		<div>
		
		
		
			<b>Start:</b> <select id="start">
				<option value="Los Angeles; California">Los Angeles, California</option>
				<option value="Chicago; Illinois">Chicago, Illinois</option>
				<option value="Houston; Texas">Houston, Texas</option>
				<option value="Philadelphia; Pennsylvania">Philadelphia, Pennsylvania</option>
				<option value="Phoenix; Arizona">Phoenix Arizona</option>
				<option value="San Antonio; Texas">San Antonio, Texas</option>
				<option value="New York City; New York">New York City, New York</option>
				<option value="San Diego; California">San Diego, California</option>
				<option value="Dallas; Texas">Dallas,Texas</option>
				<option value="San Jose; California">San Jose, California</option>
				<option value="Austin; Texas">Austin, Texas</option>
			</select>
			 <br> <b>End:</b> <select id="end">
				<option value="Los Angeles; California">Los Angeles, California</option>
				<option value="Chicago; Illinois">Chicago, Illinois</option>
				<option value="Houston; Texas">Houston, Texas</option>
				<option value="Philadelphia; Pennsylvania">Philadelphia, Pennsylvania</option>
				<option value="Phoenix; Arizona">Phoenix Arizona</option>
				<option value="San Antonio; Texas">San Antonio, Texas</option>
				<option value="New York City; New York">New York City, New York</option>
				<option value="San Diego; California">San Diego, California</option>
				<option value="Dallas; Texas">Dallas,Texas</option>
				<option value="San Jose; California">San Jose, California</option>
				<option value="Austin; Texas">Austin, Texas</option>
			</select> 
			
			
			<b>Filter</b> <select id="filter">
				
				<option value="airport">Airport</option>
				<option value="atm">ATM</option>
				<option value="bank">Bank</option>
				<option value="bar">Bar</option>
				<option value="campground">Campground</option>
				<option value="cemetery">Cemetery</option>
				<option value="convenience_store">Convenience_store</option>
				<option value="electric">Electric</option>				
				<option value="establishment">Establishment</option>
				<option value="fire_station">Fire_station</option>
				<option value="food">Food</option>
				<option value="health">Health</option>
				<option value="insurance">Insurance</option>
				<option value="library">Library</option>
				<option value="locality">Locality</option>
				<option value="lodging">Lodging</option>
				<option value="political">Political</option>
				<option value="post_office">Post_office</option>
				<option value="restaurant">Restaurant</option>
				<option value="supermarket">Supermarket</option>
				<option value="travel_agency">Travel_agency</option>
				<option value="veterinary_care">Veterinary_care</option>
				<option value="worship">Worship</option>
				
				</select><br/>
				
			
			<br><b>Vehicle Model :</b> <select id="model">
				<option value="Buick Encore">Buick Encore</option>
				<option value="Buick Lucerne">Buick Lucerne</option>
				<option value="Acura TSX">Acura TSX</option>
				<option value="Acura MDX 4WD">Acura MDX 4WD</option>
				<option value="Chrysler 300">Chrysler 300</option>
				<option value="Dodge Dart">Dodge Dart</option>
				<option value="Dodge Avenger">Dodge Avenger</option>
				<option value="GMC Terrain AWD">GMC Terrain AWD</option>
				<option value="Jeep Cherokee FWD">Jeep Cherokee FWD</option>
				<option value="Jaguar XK">Jaguar XK</option>
				<option value="Land Rover Range Rover">Land Rover Range Rover</option>
				<option value="Lexus ES 300h">Lexus ES 300h</option>
				<option value="Lincoln MKZ FWD">Lincoln MKZ FWD</option>
				<option value="Mazda 2">Mazda 2</option>
				<option value="Mercury Milan">Mercury Milan</option>
				<option value="BMW ActiveHybrid 5">BMW ActiveHybrid 5</option>
				<option value="Cadillac XTS">Cadillac XTS</option>
				<option value="BMW ActiveHybrid 5">BMW ActiveHybrid 5</option>			
				<option value="Chevrolet Sonic">Chevrolet Sonicr</option>		
				<option value="Saab 9-3 SportCombi">Saab 9-3 SportCombi Lancer</option>
				<option value="Suzuki Grand Vitara">Suzuki Grand Vitara</option>
				
				</select>
				<b>Make Year :</b> <select id="year">
				<option value="2005">2005</option>
				<option value="2005">2006</option>
				<option value="2007">2007</option>
				<option value="2008">2008</option>
				<option value="2009">2009</option>
				<option value="2010">2010</option>
				<option value="2011">2011</option>
				<option value="2012">2012</option>
				<option value="2013">2013</option>
				<option value="2014">2014</option>
				<option value="2015">2015</option>
				<option value="2016">2016</option>
				</select><br/>
				
				
				
				
			 	<input type="submit" id="submit"><br/>
			 	<b>Estimate Fuel Cost for Car:</b> <input type="text" name="cost"><br>
			
			
			
			
		</div>
		<div id="JSONOBJECTDISPLAY"></div>
		<div id="directions-panel"></div>
	</div>
	<script src="scripts/jquery-3.1.1.min.js"></script>
	<script>
		function initMap() {
			var directionsService = new google.maps.DirectionsService;
			var directionsDisplay = new google.maps.DirectionsRenderer;
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom : 6,
				center : {
					lat : 41.85,
					lng : -87.65
				}
			});
			directionsDisplay.setMap(map);

			document.getElementById('submit').addEventListener(
					'click',
					function() {
						calculateAndDisplayRoute(directionsService,
								directionsDisplay);
					});
		}

		function calculateAndDisplayRoute(directionsService, directionsDisplay) {
			var waypts = [];
			var start = document.getElementById('start').value;
			var end = document.getElementById('end').value;
			var datadString = 'start=' + encodeURIComponent(start) + '&'
					+ 'end=' + encodeURIComponent(end);

			$.ajax({
				type : "POST",
				url : "controller",
				data : datadString,
				dataType : "text",

				//if received a response from the server
				success : function(data, textStatus, jqXHR) {
					window.alert(data);
					var jsonResult = JSON.stringify(eval("(" + data + ")"));
					var jsonObj = JSON.parse(jsonResult);
					try {
						$.each(jsonObj, function(i, item) {
							waypts.push({
								location : new google.maps.LatLng(
										item.latitude, item.longitude),
								stopover : true
							});
						});
					} catch (e) {
						window.alert(e);
					}
					DisplayDirections(directionsService, directionsDisplay,
							waypts)
					//$("#error").html("<div><b>success!</b></div>"+data);
				},

				//If there was no resonse from the server
				error : function(data, textStatus, errorThrown) {
					//console.log("Something really bad happened " + textStatus);
					console.log("Something really bad happened " + data);

					$("#error").html(errorThrown + "\n" + textStatus);
				}
			});
		}

		function DisplayDirections(directionsService, directionsDisplay, waypts) {
			directionsService.route({
				origin : document.getElementById('start').value,
				destination : document.getElementById('end').value,
				waypoints : waypts,
				optimizeWaypoints : true,
				travelMode : 'DRIVING'
			}, function(response, status) {
				if (status === 'OK') {
					directionsDisplay.setDirections(response);
					var route = response.routes[0];
					var summaryPanel = document
							.getElementById('directions-panel');
					summaryPanel.innerHTML = '';
					// For each route, display summary information.
					for (var i = 0; i < route.legs.length; i++) {
						var routeSegment = i + 1;
						summaryPanel.innerHTML += '<b>Route Segment: '
								+ routeSegment + '</b><br>';
						summaryPanel.innerHTML += route.legs[i].start_address
								+ ' to ';
						summaryPanel.innerHTML += route.legs[i].end_address
								+ '<br>';
						summaryPanel.innerHTML += route.legs[i].distance.text
								+ '<br><br>';
					}
				} else {
					window.alert('Directions request failed due to ' + status);
				}
			});
		}
	</script>
	<script async defer
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDcyhQ0CcjBHzvoDvJlMJz96l8EvRzMN2o&callback=initMap">
		
	</script>
	
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : '1315153828529272',
        xfbml      : true,
        version    : 'v2.6'
      });
    };
</script>

</body>
</html>